<launch>
  <arg name="name" default="camera" doc="The name of the camera, this sets topic namespaces"/>
  <arg name="ip" default="" doc="The IP for the camera to connect to"/>
  <arg name="guid" default="" doc="The GUID for the camera to connect to"/>
  <arg name="frame_id" default="camera" doc="The frame id of the camera"/>
  <arg name="image_proc" default="false" doc="Enable the use of image_proc"/>
  <arg name="acquisition_rate" default="10" doc="Camera framerate in Hz"/>
  <arg name="width" default="2064" doc="Width of image in pixels"/>
  <arg name="height" default="1544" doc="Height of image in pixels"/>

  <!-- Image proccessing -->
  <node if="$(arg image_proc)" name="image_proc" pkg="image_proc" type="image_proc" ns="$(arg name)"/>

  <!-- Camera driver node -->
  <node name="$(arg name)" pkg="avt_vimba_camera" type="mono_camera_node">
    <param name="guid" value="$(arg guid)" />
    <param name="ip" value="$(arg ip)" />
    <param name="camera_info_url" value="file://$(find avt_vimba_camera)/calibrations/calibration_50-0503343290.yaml" />
    <param name="frame_id" value="$(arg frame_id)" />
    <param name="trig_timestamp_topic" value="" />
    <param name="show_debug_prints" value="true" />
    <param name="trigger_source" value="FixedRate" />
    <param name="acquisition_mode" value="Continuous" />
    <param name="acquisition_rate" value="$(arg acquisition_rate)" />
    <param name="pixel_format" value="BayerRG8" />

    <!-- Exposure params  -->
    <param name="exposure" value="10000" />
    <param name="gain" value="20" />
    <param name="exposure_auto" value="Off" />
    <param name="gain_auto" value="Off" />
    <param name="whitebalance_auto" value="Off" />

    <!-- Image params -->
    <param name="binning_x" value="1" />
    <param name="binning_y" value="1" />
    <param name="decimation_x" value="1" />
    <param name="decimation_y" value="1" />
    <param name="x_offset" value="8" />
    <param name="y_offset" value="9" />
    <param name="width" value="$(arg width)" />
    <param name="height" value="$(arg height)" />

    <param name="stream_bytes_per_second" value="100000000"/>
  </node>
</launch>
